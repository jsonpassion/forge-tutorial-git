# 태그

> tag 생성과 관리, 시맨틱 버저닝, 릴리스 태깅

## 개요

커밋은 매일 수십 개씩 쌓이지만, 그중에서 **특별히 중요한 시점**이 있습니다. 앱을 출시했을 때, 중요한 마일스톤을 달성했을 때, 또는 안정적인 버전을 확정했을 때죠. 태그(tag)는 이런 중요한 커밋에 **이름표를 붙여두는** 기능입니다.

**선수 지식**: [커밋의 기본](../01-git-start/04-commit-basics.md)의 커밋 해시 개념, [되돌리기 기초](./04-undo-basics.md)의 reset/revert
**학습 목표**:
- 경량 태그와 주석 태그의 차이를 이해하고 만들 수 있다
- 시맨틱 버저닝(SemVer)의 규칙을 이해한다
- 태그를 활용한 릴리스 워크플로우를 익힌다

## 왜 알아야 할까?

"이 버그, v2.1.0에서 발생한다고 하셨죠? 해당 버전 코드를 확인해 볼게요." — 이런 대화가 가능한 이유가 태그 덕분입니다. 태그가 없으면 "커밋 해시 a1b2c3d에서 발생한다"고 말해야 하는데, 누가 40자리 해시를 기억하겠어요? 태그는 커밋에 **사람이 읽을 수 있는 이름**을 붙여주는 필수 도구입니다.

## 핵심 개념

### 태그의 두 가지 종류

> 💡 **비유**: 태그는 **책갈피**와 같습니다. 경량 태그는 그냥 페이지 사이에 끼워두는 얇은 종이 책갈피이고, 주석 태그는 메모까지 적을 수 있는 포스트잇 책갈피인 셈이죠.

#### 1. 경량 태그 (Lightweight Tag)

경량 태그는 단순히 특정 커밋을 가리키는 **포인터**입니다. 추가 정보가 없어서 임시 표시나 개인 용도에 적합합니다.

```bash
# 경량 태그 만들기 (현재 HEAD에)
git tag v0.1

# 특정 커밋에 경량 태그 달기
git tag v0.1 a1b2c3d
```

#### 2. 주석 태그 (Annotated Tag)

주석 태그는 **작성자, 날짜, 메시지**가 함께 저장되는 완전한 Git 객체입니다. 릴리스 태그에는 항상 주석 태그를 사용하세요.

```bash
# 주석 태그 만들기 (-a 옵션)
git tag -a v1.0.0 -m "첫 번째 정식 릴리스"

# 특정 커밋에 주석 태그 달기
git tag -a v1.0.0 -m "첫 번째 정식 릴리스" a1b2c3d
```

두 종류의 차이를 비교하면:

| 특성 | 경량 태그 | 주석 태그 |
|------|----------|----------|
| 저장 정보 | 커밋 참조만 | 작성자, 날짜, 메시지, 커밋 참조 |
| 생성 명령 | `git tag v1.0` | `git tag -a v1.0 -m "메시지"` |
| 서명 가능 | 불가 | GPG/SSH 서명 가능 |
| 추천 용도 | 임시 표시, 개인 용도 | 릴리스, 공유, 공식 버전 |

```bash
# 태그 목록 보기
git tag

# 패턴으로 필터링
git tag -l "v1.*"

# 태그 상세 정보 보기
git show v1.0.0
```

```output
tag v1.0.0
Tagger: 홍길동 <gildong@example.com>
Date:   Sat Feb 15 15:00:00 2026 +0900

첫 번째 정식 릴리스

commit a1b2c3d4e5f6...
Author: 홍길동 <gildong@example.com>
Date:   Sat Feb 15 14:30:00 2026 +0900

    로그인 기능 완성
...
```

### 시맨틱 버저닝 (Semantic Versioning)

> 💡 **비유**: 시맨틱 버저닝은 **신호등**과 같습니다. 빨간불(MAJOR)은 "큰 변화가 있으니 주의!", 노란불(MINOR)은 "새 기능이 있지만 기존 것은 그대로", 초록불(PATCH)은 "안전하게 업데이트하세요, 버그만 고쳤어요"를 의미합니다.

태그 이름에는 보통 **시맨틱 버저닝(SemVer)** 규칙을 따릅니다:

```console
MAJOR.MINOR.PATCH
  v2.   1.    3
```

| 구분 | 언제 올리나요? | 예시 |
|------|-------------|------|
| **MAJOR** (주) | 이전 버전과 호환되지 않는 변경 | `1.0.0` → `2.0.0` |
| **MINOR** (부) | 하위 호환되는 새 기능 추가 | `1.0.0` → `1.1.0` |
| **PATCH** (수) | 하위 호환되는 버그 수정 | `1.0.0` → `1.0.1` |

#### SemVer의 핵심 규칙

1. MAJOR가 0인 버전(`0.x.y`)은 **개발 중**을 의미하며 언제든 변경 가능
2. `1.0.0`이 **공개 API의 시작점** — 이 이후부터 규칙을 엄격히 지킴
3. MAJOR를 올리면 MINOR와 PATCH는 0으로 초기화 (`1.4.2` → `2.0.0`)
4. MINOR를 올리면 PATCH는 0으로 초기화 (`1.4.2` → `1.5.0`)
5. 프리릴리스: `1.0.0-alpha`, `1.0.0-beta.1`, `1.0.0-rc.1` 형식 사용

```bash
# 실무에서의 버전 태그 예시
git tag -a v1.0.0 -m "1.0.0 정식 릴리스"
git tag -a v1.0.1 -m "로그인 버그 수정"
git tag -a v1.1.0 -m "소셜 로그인 기능 추가"
git tag -a v2.0.0 -m "API 전면 개편 — Breaking Changes 포함"
```

> 💡 **알고 계셨나요?**: 시맨틱 버저닝 규약(SemVer 2.0.0)을 만든 사람은 **Tom Preston-Werner**, 바로 GitHub의 공동 창립자입니다! 그는 오픈소스 생태계에서 버전 번호가 주는 혼란을 해결하기 위해 2013년에 이 규약을 발표했습니다. "의존성 지옥(dependency hell)"에서 벗어나기 위한 해결책이었죠.

### 태그 관리

```bash
# 태그 삭제 (로컬)
git tag -d v0.1

# 태그 삭제 (원격)
git push origin --delete v0.1
```

#### 원격 저장소에 태그 공유

태그는 `git push`만으로는 원격에 전송되지 않습니다. **명시적으로 push**해야 합니다:

```bash
# 특정 태그 push
git push origin v1.0.0

# 모든 태그 한 번에 push
git push origin --tags

# 주석 태그만 push (경량 태그 제외)
git push origin --follow-tags
```

> 🔥 **실무 팁**: `git push --tags`는 로컬의 **모든** 태그를 push하므로, 실수로 만든 태그나 테스트용 태그까지 올라갈 수 있습니다. 릴리스 태그만 올리고 싶다면 `git push origin v1.0.0`처럼 하나씩 지정하거나, `--follow-tags`를 사용하세요 — 이 옵션은 주석 태그만 push합니다.

### git describe — 현재 위치를 버전으로 표현

`git describe`는 가장 가까운 태그를 기준으로 현재 위치를 표현합니다:

```bash
git describe
```

```output
v1.0.0-3-ga1b2c3d
```

이 출력의 의미:

| 부분 | 의미 |
|------|------|
| `v1.0.0` | 가장 가까운 태그 |
| `3` | 그 태그 이후 3개의 커밋이 더 있음 |
| `ga1b2c3d` | 현재 커밋의 축약 해시 (g = git) |

만약 현재 커밋에 정확히 태그가 달려 있다면, 태그 이름만 출력됩니다:

```bash
git describe
```

```output
v1.0.0
```

## 실습: 직접 해보기

```bash
# 1. 실습용 저장소 준비
mkdir tag-practice && cd tag-practice
git init

# 2. 여러 커밋 만들기
echo "v0.1 프로토타입" > app.txt
git add . && git commit -m "프로토타입 완성"

echo "v1.0 정식 기능" >> app.txt
git add . && git commit -m "정식 기능 완성"

# 3. 주석 태그 달기
git tag -a v1.0.0 -m "첫 번째 정식 릴리스"

# 4. 이후 개발 계속
echo "버그 수정" >> app.txt
git add . && git commit -m "로그인 버그 수정"

echo "새 기능" >> app.txt
git add . && git commit -m "소셜 로그인 추가"

# 5. 패치 버전 태그
git tag -a v1.0.1 -m "로그인 버그 수정" HEAD~1

# 6. 마이너 버전 태그
git tag -a v1.1.0 -m "소셜 로그인 기능 추가"

# 7. 태그 확인
git tag -l
git log --oneline --decorate

# 8. 태그 상세 정보
git show v1.0.0

# 9. git describe 테스트
git describe
```

## 더 깊이 알아보기

### 서명된 태그 — 진짜 내가 만든 건지 증명하기

보안이 중요한 프로젝트에서는 태그에 **GPG 또는 SSH 서명**을 추가할 수 있습니다. 서명된 태그는 "이 릴리스가 진짜 해당 개발자가 만든 것"임을 암호학적으로 증명합니다.

```bash
# GPG로 서명된 태그 만들기
git tag -s v1.0.0 -m "서명된 릴리스"

# 태그 서명 검증
git tag -v v1.0.0
```

자세한 내용은 [보안](../12-troubleshooting/04-security.md) 챕터에서 다룹니다.

### CalVer — 날짜 기반 버저닝

시맨틱 버저닝 외에 **Calendar Versioning(CalVer)**이라는 방식도 있습니다. Ubuntu(`24.04`), pip(`24.0`), `pytz` 등이 CalVer를 사용합니다. 릴리스 날짜를 버전 번호에 직접 반영하는 방식이죠.

| 방식 | 형식 | 예시 |
|------|------|------|
| SemVer | `MAJOR.MINOR.PATCH` | `2.1.3` |
| CalVer | `YYYY.MM` | `2026.02` |
| 하이브리드 | `YYYY.MM.PATCH` | `2026.02.1` |

프로젝트의 성격에 따라 선택하면 됩니다. API가 있는 라이브러리는 SemVer가, 정기 배포 앱은 CalVer가 더 적합할 수 있어요.

## 흔한 오해와 팁

> ⚠️ **흔한 오해**: "태그는 브랜치와 같다" — 아닙니다! 브랜치는 새 커밋이 추가되면 **자동으로 이동**하는 포인터이지만, 태그는 특정 커밋에 **고정된** 이름표입니다. 태그가 가리키는 커밋은 절대 바뀌지 않아요.

> 🔥 **실무 팁**: GitHub/GitLab에서 태그를 push하면 자동으로 **릴리스(Release)**를 만들 수 있습니다. [GitHub Actions](../10-github-actions/04-cd.md)와 결합하면 태그를 push하는 것만으로 빌드, 테스트, 배포가 자동으로 진행되는 CD(Continuous Deployment) 파이프라인을 구축할 수 있죠.

## 핵심 정리

| 개념 | 설명 |
|------|------|
| 경량 태그 | 커밋을 가리키는 단순 포인터 (`git tag v1.0`) |
| 주석 태그 | 작성자, 날짜, 메시지를 포함하는 완전한 객체 (`git tag -a`) |
| 시맨틱 버저닝 | `MAJOR.MINOR.PATCH` — 변경의 성격을 버전 번호로 표현 |
| `git push origin --tags` | 모든 로컬 태그를 원격에 전송 |
| `git describe` | 가장 가까운 태그 기준으로 현재 위치 표현 |
| `git tag -d <태그>` | 로컬 태그 삭제 |

## 다음 섹션 미리보기

Ch2의 모든 내용을 마스터했습니다! 이제 Part 2로 넘어가, Git의 가장 강력한 기능 중 하나인 **브랜치**를 배울 차례입니다. 다음 챕터 [Ch3. 브랜치](../03-branch/01-branch-concept.md)에서는 브랜치의 개념, HEAD 포인터, 그리고 평행 세계처럼 독립적인 작업 공간을 만드는 방법을 배웁니다.

## 참고 자료

- [Pro Git Book — 태그](https://git-scm.com/book/ko/v2/Git%EC%9D%98-%EA%B8%B0%EC%B4%88-%ED%83%9C%EA%B7%B8) - 태그의 공식 가이드
- [Semantic Versioning 2.0.0](https://semver.org/lang/ko/) - 시맨틱 버저닝 공식 규약 (한국어)
- [Git 공식 문서 — git-tag](https://git-scm.com/docs/git-tag) - tag의 모든 옵션 레퍼런스
- [CalVer](https://calver.org/) - 캘린더 버저닝 공식 사이트
